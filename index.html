<!DOCTYPE html>
<html lang="ja">
<head><link rel="icon" href="data:,">

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ã‚³ãƒ¡ãƒ€1000å††ã‚¬ãƒãƒ£ï¼ˆæ™‚é–“å¸¯å¯¾å¿œï¼‰</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#7b3f00">
<style>
  body {
    font-family: sans-serif;
    text-align: center;
    background: #fff7e6;
    margin: 0;
    padding: 20px;
  }
  .card {
    background: #fff;
    border-radius: 10px;
    padding: 15px;
    margin: 10px auto;
    max-width: 460px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
  }
  select, button {
    padding: 10px;
    margin: 6px;
    font-size: 16px;
  }
  button {
    background: #7b3f00;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  #result-list {
    text-align: left;
    margin-top: 12px;
    max-width: 420px;
    margin-left: auto;
    margin-right: auto;
  }
</style>
</head>

<body>

<h1>â˜• ã‚³ãƒ¡ãƒ€ äºˆç®—ã‚¬ãƒãƒ£ï¼ˆæ™‚é–“å¸¯å¯¾å¿œï¼‰</h1>

<div class="card">
  <div>
    äººæ•°ï¼š
    <select id="people">
      <option value="1">1äºº</option>
      <option value="2" selected>2äºº</option>
    </select>
    äºˆç®—ï¼š
    <select id="budget">
      <option value="800">800å††</option>
      <option value="1000" selected>1000å††</option>
      <option value="1200">1200å††</option>
      <option value="1500">1500å††</option>
    </select>
  </div>
<div id="timeSelect">
  <label>
    <input type="radio" name="period" value="morning" checked>
    æœ
  </label>
  <label>
    <input type="radio" name="period" value="lunch">
    æ˜¼
  </label>
  <label>
    <input type="radio" name="period" value="night">
    å¤œ
  </label>
</div>

  <button onclick="runGacha()">ğŸ² ã‚¬ãƒãƒ£ã‚’å›ã™</button>

  <div id="result"></div>

</div>
<script>
const menus = {
  morning: [
    { name: "ãƒ¢ãƒ¼ãƒ‹ãƒ³ã‚°ãƒˆãƒ¼ã‚¹ãƒˆ", price: 0 },
    { name: "ã‚³ãƒ¡ãƒ€ãƒ–ãƒ¬ãƒ³ãƒ‰", price: 460 },
    { name: "ãƒŸãƒ‹ã‚µãƒ©ãƒ€", price: 200 }
  ],
  lunch: [
    { name: "ãƒŸãƒƒã‚¯ã‚¹ã‚µãƒ³ãƒ‰", price: 680 },
    { name: "ãƒŠãƒãƒªã‚¿ãƒ³", price: 770 },
    { name: "ã‚¢ã‚¤ã‚¹ã‚³ãƒ¼ãƒ’ãƒ¼", price: 480 }
  ],
  night: [
    { name: "ã‚·ãƒ­ãƒãƒ¯ãƒ¼ãƒ«", price: 730 },
    { name: "ãŸã£ã·ã‚Šãƒ–ãƒ¬ãƒ³ãƒ‰", price: 560 },
    { name: "ã¿ãã‚«ãƒ„ãƒ‘ãƒ³", price: 880 }
  ]
};

function runGacha() {
  const people = Number(document.getElementById("people").value);
  const budget = Number(document.getElementById("budget").value);

  const period = document.querySelector(
    'input[name="period"]:checked'
  ).value;

  const menu = menus[period];

  let total = 0;
  let result = [];
  let usedZero = false;

  function canAdd(item) {
    if (item.price === 0 && usedZero) return false;
    return total + item.price <= budget;
  }

  for (let i = 0; i < people; i++) {
    const candidates = menu.filter(canAdd);
    if (candidates.length === 0) break;
    const item = candidates[Math.floor(Math.random() * candidates.length)];
    result.push(item);
    total += item.price;
    if (item.price === 0) usedZero = true;
  }

  let guard = 0;
  while (guard < 100) {
    const candidates = menu.filter(canAdd);
    if (candidates.length === 0) break;
    const item = candidates[Math.floor(Math.random() * candidates.length)];
    result.push(item);
    total += item.price;
    if (item.price === 0) usedZero = true;
    guard++;
  }

  const periodLabel =
    period === "morning" ? "æœ" :
    period === "lunch" ? "æ˜¼" : "å¤œ";

  const shareText =
    `ã€ã‚³ãƒ¡ãƒ€1000å††ã‚¬ãƒãƒ£ã€‘\n${periodLabel}ã‚¬ãƒãƒ£\n` +
    result.map(r => `ãƒ»${r.name}ï¼ˆÂ¥${r.price}ï¼‰`).join("\n") +
    `\nåˆè¨ˆ Â¥${total}\næ®‹é‡‘ Â¥${budget - total}\n#ã‚³ãƒ¡ãƒ€ã‚¬ãƒãƒ£`;

  window.shareText = shareText;

  document.getElementById("result").innerHTML = `
    <h3>${periodLabel}ã‚¬ãƒãƒ£çµæœ</h3>
    <ul>${result.map(r => `<li>${r.name}ï¼ˆÂ¥${r.price}ï¼‰</li>`).join("")}</ul>
    <p>åˆè¨ˆ Â¥${total}ï¼ˆæ®‹é‡‘ Â¥${budget - total}ï¼‰</p>
    <button onclick="shareResult()">SNSã§ã‚·ã‚§ã‚¢</button>
  `;
}

function shareResult() {
  if (navigator.share) {
    navigator.share({ text: window.shareText });
  } else {
    navigator.clipboard.writeText(window.shareText);
    alert("ã‚·ã‚§ã‚¢æ–‡ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ");
  }
}
  <p style="font-size:12px;color:#666;">
â€» ãƒ¡ãƒ‹ãƒ¥ãƒ¼å†…å®¹ãƒ»ä¾¡æ ¼ã¯ä»£è¡¨ä¾‹ã§ã™ã€‚å®Ÿéš›ã®å†…å®¹ãƒ»ä¾¡æ ¼ã¯åº—èˆ—ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ã€‚
</p>

</script>

</body>
</html>
